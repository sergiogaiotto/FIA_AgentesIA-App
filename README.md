# Agentes de IA - FIA, Prof. Sergio Gaiotto

Plataforma avan√ßada com **seis agentes especializados** em pesquisa, an√°lise, RAG, integra√ß√µes externas, gera√ß√£o de diagramas e an√°lise de imagens, desenvolvida para demonstrar diferentes abordagens de IA aplicada.

![Agentes de IA](https://img.shields.io/badge/Agentes-6-blue)
![FastAPI](https://img.shields.io/badge/FastAPI-0.115.4-green)
![Python](https://img.shields.io/badge/Python-3.11+-brightgreen)
![Version](https://img.shields.io/badge/Version-1.4.0-orange)

## ü§ñ Agentes Dispon√≠veis

### 1. **Agente MCP** 
- **Especialidade**: Integra√ß√£o din√¢mica com ferramentas externas
- **Tecnologia**: Model Context Protocol (MCP) + Firecrawl
- **Funcionalidades**:
  - Scraping em tempo real
  - Integra√ß√£o conversacional
  - Acesso din√¢mico a APIs externas

### 2. **Agente Workflow**
- **Especialidade**: Pesquisa estruturada e an√°lise comparativa
- **Tecnologia**: LangGraph + workflows estruturados
- **Funcionalidades**:
  - Fluxo de pesquisa em 3 etapas (extra√ß√£o ‚Üí pesquisa ‚Üí an√°lise)
  - An√°lise comparativa de produtos/servi√ßos
  - Recomenda√ß√µes t√©cnicas objetivas

### 3. **Agente RAG**
- **Especialidade**: Retrieval-Augmented Generation
- **Tecnologia**: Pinecone + OpenAI Embeddings
- **Funcionalidades**:
  - Pesquisa sem√¢ntica em base de conhecimento
  - Cita√ß√£o de fontes utilizadas
  - Scoring de confian√ßa das respostas
  - Gest√£o din√¢mica da base de conhecimento

### 4. **Agente Externo**
- **Especialidade**: Integra√ß√£o com APIs externas
- **Tecnologia**: aiohttp + Flowise API
- **Funcionalidades**:
  - Comunica√ß√£o com APIs externas (Flowise)
  - Manuten√ß√£o de contexto conversacional
  - Processamento especializado via servi√ßos externos
  - Monitoramento de conectividade

### 5. **Tool Mermaid Agent**
- **Especialidade**: Gera√ß√£o de diagramas Mermaid
- **Tecnologia**: OpenAI + Mermaid.js integration
- **Funcionalidades**:
  - Cria√ß√£o de diagramas de sequ√™ncia, fluxogramas, diagramas de classe
  - Gr√°ficos de Gantt e diagramas ER
  - Explica√ß√µes detalhadas dos diagramas
  - Sugest√µes de melhorias
  - Hist√≥rico de diagramas gerados

### 6. **ClassificaImagem Agent**
- **Especialidade**: An√°lise visual de imagens com foco em marketing
- **Tecnologia**: LlamaIndex + GPT-4 Vision
- **Funcionalidades**:
  - Detec√ß√£o e classifica√ß√£o de objetos
  - An√°lise de paleta de cores e harmonia
  - Insights de marketing e p√∫blico-alvo
  - An√°lise de composi√ß√£o visual
  - Retorno estruturado em JSON
  - Sugest√µes de melhorias

## üöÄ Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos
- Python 3.11+
- Node.js 18+ (para MCP Agent)
- Contas nos servi√ßos:
  - [OpenAI](https://platform.openai.com/) (obrigat√≥rio)
  - [Firecrawl](https://firecrawl.dev/) (MCP e Workflow)
  - [Pinecone](https://www.pinecone.io/) (RAG Agent)
  - API Flowise (Agente Externo - opcional)

![image](https://github.com/user-attachments/assets/74dae25c-991c-4358-9de2-b2a426da9885)


### 1. Clone do Reposit√≥rio
```bash
git clone https://github.com/sergiogaiotto/FIA_AgentesIA
cd FIA_AgentesIA
```

### 2. Ambiente Virtual (Recomendado)
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows
```

### 3. Instala√ß√£o de Depend√™ncias

#### Python
```bash
pip install --upgrade pip
pip install -r requirements.txt
```

#### Node.js (para MCP Agent)
```bash
npm install -g firecrawl-mcp
```

### 4. Configura√ß√£o de Vari√°veis de Ambiente

Crie um arquivo `.env` na raiz do projeto:

```bash
# APIs Obrigat√≥rias
OPENAI_API_KEY=sk-your-openai-key-here

# APIs Opcionais (por agente)
FIRECRAWL_API_KEY=fc-your-firecrawl-key-here  # MCP + Workflow
PINECONE_API_KEY=your-pinecone-key-here       # RAG Agent

# Configura√ß√£o do Servidor
PORT=8000
ENVIRONMENT=development
```

**Nota**: Os agentes Externo, Tool Mermaid e ClassificaImagem n√£o requerem configura√ß√µes espec√≠ficas al√©m da OpenAI.

## üéØ Como Usar

### Execu√ß√£o Local
```bash
python app.py
```

A aplica√ß√£o estar√° dispon√≠vel em: `http://localhost:8000`

### Interface Web

1. **Sele√ß√£o de Agente**: Escolha um dos seis agentes dispon√≠veis
2. **Chat Interativo**: Fa√ßa perguntas naturalmente
3. **Recursos Especiais**:
   - **RAG Agent**: Painel de gest√£o da base de conhecimento
   - **Agente Externo**: Painel de status e configura√ß√£o da API
   - **Tool Mermaid**: Painel de tipos de diagrama e hist√≥rico
   - **ClassificaImagem**: Painel de tipos de an√°lise e hist√≥rico
   - **Todas**: Indicadores visuais de progresso

## üé® Usando o Tool Mermaid Agent

### Funcionalidades Principais

O Tool Mermaid Agent permite criar diagramas profissionais usando linguagem natural:

#### Tipos de Diagrama Suportados
```
"Crie um diagrama de sequ√™ncia para login de usu√°rio"
"Fluxograma para processo de aprova√ß√£o"
"Diagrama de classes para sistema de biblioteca"
"Gr√°fico de Gantt para projeto de 3 meses"
"Diagrama ER para banco de dados de e-commerce"
```

#### Interface Especializada
1. Selecione "Tool Mermaid Agent"
2. Clique em "Tipos de Diagrama"
3. Escolha o tipo desejado
4. Descreva o diagrama em linguagem natural
5. Visualize o c√≥digo Mermaid gerado

### Recursos Avan√ßados
- **Explica√ß√µes Detalhadas**: Cada diagrama vem com explica√ß√£o completa
- **Sugest√µes de Melhoria**: Recomenda√ß√µes para otimizar o diagrama
- **Hist√≥rico Persistente**: Todos os diagramas s√£o salvos na sess√£o
- **Exemplos Prontos**: Templates para come√ßar rapidamente

### Integra√ß√£o com Ferramentas
O c√≥digo Mermaid gerado pode ser usado em:
- GitHub/GitLab (renderiza√ß√£o nativa)
- Notion, Obsidian, Typora
- Mermaid.live para visualiza√ß√£o online
- Extens√µes VSCode/Vim

## üåê Usando o Agente Externo

### Funcionalidades Principais

O Agente Externo permite integra√ß√£o com APIs externas, especificamente otimizado para Flowise:

#### Processamento de Prompts
```
"Explique conceitos de machine learning de forma simples"
"Como funciona deep learning em vis√£o computacional?"
"Quais s√£o as melhores pr√°ticas para prompt engineering?"
```

#### Monitoramento via Interface Web
1. Selecione "Agente Externo"
2. Clique em "Status & Config"
3. Use os controles para:
   - Verificar status da API
   - Resetar contexto conversacional
   - Testar conectividade

### Configura√ß√£o da API Flowise

O agente est√° pr√©-configurado para usar:
- **Endpoint**: `https://gaiotto-flowiseai.hf.space/api/v1/prediction/126dd353-3c69-4304-9542-1263d07c711a`
- **Timeout**: 30 segundos
- **Contexto**: Mant√©m hist√≥rico de 10 mensagens

Para usar uma API Flowise personalizada, modifique o endpoint no c√≥digo:

```python
# Em agents/externo_agent.py
externo_agent = ExternoAgent(api_url="sua-api-flowise-aqui")
```

## üß† Usando o Agente RAG

### Gest√£o da Base de Conhecimento

O Agente RAG permite gerenciar dinamicamente sua base de conhecimento:

#### Adicionar via URL
```python
# Exemplo program√°tico
await rag_agent.add_knowledge_from_url("https://docs.python.org/3/tutorial/")
```

#### Adicionar Texto Direto
```python
# Exemplo program√°tico  
await rag_agent.add_knowledge_from_text(
    text="Python √© uma linguagem de programa√ß√£o...",
    source_id="python-basics"
)
```

#### Via Interface Web
1. Selecione "Agente RAG"
2. Clique em "Gerenciar Base"
3. Use os formul√°rios para adicionar:
   - URLs de documenta√ß√£o
   - Textos diretos
   - Fontes sugeridas

### Exemplos de Consultas RAG

```
"Como funciona list comprehension em Python?"
"Qual a diferen√ßa entre async e await?"
"Melhores pr√°ticas para tratamento de exce√ß√µes"
```

## üñºÔ∏è Usando o ClassificaImagem Agent

### Funcionalidades Principais

O ClassificaImagem Agent permite an√°lise visual completa de imagens usando GPT-4 Vision via LlamaIndex:

#### Tipos de An√°lise Suportados
```
"Analise esta imagem completa: https://exemplo.com/imagem.jpg"
"Detecte objetos nesta imagem: https://exemplo.com/produto.png" 
"Analise as cores desta imagem: https://exemplo.com/design.jpg"
"Que insights de marketing: https://exemplo.com/anuncio.png"
```

#### Interface Especializada
1. Selecione "ClassificaImagem Agent"
2. Clique em "An√°lise & Hist√≥rico"
3. Escolha o tipo de an√°lise:
   - **Completa**: An√°lise visual completa
   - **Objetos**: Foco em detec√ß√£o de objetos
   - **Cores**: An√°lise de paleta e harmonia
   - **Marketing**: Insights estrat√©gicos
4. Cole URL da imagem no chat
5. Receba an√°lise detalhada em JSON

### Recursos Avan√ßados
- **Detec√ß√£o de Objetos**: Identifica e classifica objetos com n√≠vel de confian√ßa
- **An√°lise de Cores**: Paleta dominante, harmonia e impacto psicol√≥gico
- **Insights de Marketing**: P√∫blico-alvo, posicionamento, apelo emocional
- **Composi√ß√£o Visual**: An√°lise t√©cnica da imagem
- **JSON Estruturado**: Dados estruturados para integra√ß√£o
- **Hist√≥rico Persistente**: Todas as an√°lises s√£o salvas

### Exemplos de Uso

#### An√°lise de Produto para E-commerce
```
"Analise esta imagem de produto para estrat√©gia de marketing: https://loja.com/produto.jpg"
```

**Retorno esperado**:
- Objetos detectados no produto
- Paleta de cores e harmonia
- P√∫blico-alvo sugerido
- Sugest√µes de posicionamento
- Canais de marketing recomendados

#### An√°lise de Design/Logo
```
"Que insights de marketing esta imagem transmite: https://empresa.com/logo.png"
```

**Retorno esperado**:
- An√°lise visual do design
- Impacto das cores escolhidas
- Posicionamento de marca sugerido
- Apelo emocional identificado

## üé® Compara√ß√£o dos Agentes

| Recurso | MCP | Workflow | RAG | Externo | Mermaid | ClassificaImagem |
|---------|-----|----------|-----|---------|---------|------------------|
| **Tempo Real** | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |
| **Mem√≥ria Persistente** | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ* | ‚úÖ** | ‚úÖ*** |
| **Fontes Citadas** | ‚ùå | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚úÖ**** |
| **An√°lise Estruturada** | ‚ùå | ‚úÖ | ‚ùå | ‚ùå | ‚úÖ | ‚úÖ |
| **Entrada Visual** | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| **Sa√≠da JSON** | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚úÖ |
| **APIs Externas** | ‚úÖ | ‚ùå | ‚ùå | ‚úÖ | ‚ùå | ‚ùå |
| **Contexto Conversacional** | ‚úÖ | ‚ùå | ‚ùå | ‚úÖ | ‚ùå | ‚ùå |
| **Gera√ß√£o Visual** | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚úÖ | ‚ùå |

*\* Contexto mantido durante a sess√£o*  
*\** Hist√≥rico de diagramas gerados*  
*\*** Hist√≥rico de an√°lises de imagem*  
*\**** An√°lise de origem da imagem*

## üõ†Ô∏è Estrutura do Projeto

```
FIA_AgentesIA/
‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py                 # Exports dos agentes
‚îÇ   ‚îú‚îÄ‚îÄ mcp_agent.py               # Agente MCP
‚îÇ   ‚îú‚îÄ‚îÄ workflow_agent.py          # Agente Workflow  
‚îÇ   ‚îú‚îÄ‚îÄ rag_agent.py               # Agente RAG
‚îÇ   ‚îú‚îÄ‚îÄ externo_agent.py           # Agente Externo
‚îÇ   ‚îú‚îÄ‚îÄ tool_mermaid_agent.py      # Tool Mermaid Agent
‚îÇ   ‚îî‚îÄ‚îÄ classifica_imagem_agent.py # ClassificaImagem Agent
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ index.html                 # Interface web atualizada
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ style.css                 # Estilos
‚îÇ   ‚îî‚îÄ‚îÄ script.js                 # JavaScript
‚îú‚îÄ‚îÄ app.py                        # FastAPI server
‚îú‚îÄ‚îÄ requirements.txt              # Depend√™ncias Python
‚îú‚îÄ‚îÄ render.yaml                   # Configura√ß√£o deploy
‚îî‚îÄ‚îÄ README.md                     # Este arquivo
```

## üåê Deploy no Render

### Configura√ß√£o Autom√°tica

1. **Fork** este reposit√≥rio
2. Conecte ao [Render](https://render.com)
3. Configure as vari√°veis de ambiente:
   ```
   OPENAI_API_KEY=sk-...
   FIRECRAWL_API_KEY=fc-...
   PINECONE_API_KEY=...
   ```
4. Deploy autom√°tico via `render.yaml`

### Vari√°veis de Ambiente no Render

```bash
# Obrigat√≥rias
OPENAI_API_KEY=sk-your-openai-key

# Opcionais (habilitam agentes espec√≠ficos)
FIRECRAWL_API_KEY=fc-your-firecrawl-key  
PINECONE_API_KEY=your-pinecone-key

# Agentes Externo, Mermaid e ClassificaImagem funcionam apenas com OpenAI
```

## üîß APIs Dispon√≠veis

### Endpoints Principais
- `POST /chat` - Chat com agentes
- `POST /chat/stream` - Streaming de respostas
- `GET /agents/info` - Informa√ß√µes dos agentes
- `GET /health` - Health check

### Endpoints ClassificaImagem Espec√≠ficos ‚≠ê
- `POST /imagem/analyze` - An√°lise detalhada de imagem
- `GET /imagem/history` - Hist√≥rico de an√°lises
- `POST /imagem/reset` - Reset hist√≥rico

### Endpoints RAG Espec√≠ficos
- `POST /rag/knowledge` - Adicionar conhecimento
- `GET /rag/stats` - Estat√≠sticas da base
- `GET /rag/suggest-sources/{domain}` - Sugerir fontes

### Endpoints Agente Externo
- `GET /externo/status` - Status da API Flowise
- `POST /externo/reset` - Reset contexto conversacional

### Endpoints Tool Mermaid Espec√≠ficos
- `GET /mermaid/diagram-types` - Tipos de diagrama suportados
- `GET /mermaid/history` - Hist√≥rico de diagramas
- `POST /mermaid/reset` - Reset hist√≥rico

## üéì Casos de Uso

### Agente MCP
- Pesquisa de produtos em tempo real
- Extra√ß√£o de dados de sites espec√≠ficos
- An√°lise conversacional de conte√∫do web

### Agente Workflow  
- Compara√ß√£o estruturada de ferramentas
- An√°lise de mercado sistematizada
- Recomenda√ß√µes t√©cnicas baseadas em crit√©rios

### Agente RAG
- Suporte t√©cnico com base de conhecimento
- Q&A sobre documenta√ß√£o interna
- Pesquisa sem√¢ntica em artigos/manuais

### Tool Mermaid Agent
- Documenta√ß√£o t√©cnica com diagramas
- Modelagem de processos de neg√≥cio
- Arquitetura de software visual
- Planejamento de projetos com Gantt
- Mapeamento de jornadas do usu√°rio

### Agente Externo
- Processamento especializado via Flowise
- Integra√ß√£o com pipelines de IA externos
- An√°lise avan√ßada de linguagem natural
- Prototipagem r√°pida com APIs externas


## üìà Casos de Uso do ClassificaImagem

### E-commerce e Produtos
- **An√°lise de Fotos de Produto**: Otimiza√ß√£o para convers√£o
- **Competi√ß√£o Visual**: An√°lise de produtos concorrentes
- **Categoriza√ß√£o Autom√°tica**: Classifica√ß√£o de invent√°rio

### Marketing e Design
- **Campanhas Publicit√°rias**: An√°lise de efetividade visual
- **Brand Guidelines**: Consist√™ncia de cores e estilo
- **A/B Testing Visual**: Compara√ß√£o de designs

### An√°lise de Conte√∫do
- **Social Media**: An√°lise de engagement visual
- **User Generated Content**: Classifica√ß√£o autom√°tica
- **Modera√ß√£o de Conte√∫do**: Detec√ß√£o de elementos

### Insights Estrat√©gicos
- **Pesquisa de Mercado**: An√°lise visual de tend√™ncias
- **Posicionamento de Marca**: An√°lise competitiva visual
- **P√∫blico-Alvo**: Segmenta√ß√£o baseada em prefer√™ncias visuais

## üìù Licen√ßa

MIT License - veja LICENSE para detalhes.

## üë®‚Äçüè´ Cr√©ditos

**Desenvolvido por**: FIA.LabData - Prof. Sergio Gaiotto

**Institui√ß√£o**: Funda√ß√£o Instituto de Administra√ß√£o (FIA)

**Prop√≥sito**: Demonstra√ß√£o acad√™mica de diferentes arquiteturas de agentes IA

## üîÑ Atualiza√ß√µes Recentes

### v1.4.0 - ClassificaImagem Agent ‚≠ê **NOVO**
- ‚úÖ Novo ClassificaImagem Agent para an√°lise visual
- ‚úÖ Integra√ß√£o com LlamaIndex + GPT-4 Vision
- ‚úÖ An√°lise de objetos, cores e insights de marketing
- ‚úÖ Retorno estruturado em JSON
- ‚úÖ Interface especializada com tipos de an√°lise
- ‚úÖ Hist√≥rico de an√°lises persistente
- ‚úÖ Fun√ß√µes de download e c√≥pia de dados
- ‚úÖ Exemplos de prompts prontos

### v1.3.0 - Tool Mermaid Agent
- ‚úÖ Novo Tool Mermaid Agent para gera√ß√£o de diagramas
- ‚úÖ Suporte a m√∫ltiplos tipos de diagrama
- ‚úÖ Interface especializada com seletor de tipos
- ‚úÖ Hist√≥rico de diagramas gerados
- ‚úÖ Exemplos de prompts prontos
- ‚úÖ Explica√ß√µes detalhadas e sugest√µes
- ‚úÖ Integra√ß√£o com ferramentas Mermaid existentes

### v1.2.0 - Agente Externo
- ‚úÖ Novo Agente Externo para APIs externas
- ‚úÖ Integra√ß√£o com Flowise API
- ‚úÖ Painel de status e configura√ß√£o
- ‚úÖ Contexto conversacional mantido
- ‚úÖ Monitoramento de conectividade
- ‚úÖ Interface atualizada com 4 agentes


### v1.1.0 - Agente RAG
- ‚úÖ Novo Agente RAG com Pinecone
- ‚úÖ Interface de gest√£o de conhecimento
- ‚úÖ Cita√ß√£o de fontes e scoring
- ‚úÖ APIs espec√≠ficas para RAG
- ‚úÖ Documenta√ß√£o atualizada


## üÜò Suporte

### Documenta√ß√£o Adicional
- **Configura√ß√£o Ambiente**: `.env.example`
- **Deploy**: `render.yaml`

### Comunidade
- **Issues**: [GitHub Issues](https://github.com/sergiogaiotto/FIA_AgentesIA/issues)
- **Discuss√µes**: [GitHub Discussions](https://github.com/sergiogaiotto/FIA_AgentesIA/discussions)
- **Email**: sergio.gaiotto@fia.com.br

### Recursos Externos
- **OpenAI Documentation**: https://docs.openai.com/
- **LlamaIndex Documentation**: https://docs.llamaindex.ai/
- **GPT-4 Vision Guide**: https://platform.openai.com/docs/guides/vision
- **Firecrawl Documentation**: https://docs.firecrawl.dev/
- **Pinecone Documentation**: https://docs.pinecone.io/
- **Mermaid Documentation**: https://mermaid.js.org/
---

**üöÄ Experimente os seis agentes e descubra diferentes abordagens para IA aplicada!**

---

## ‚≠ê Features em Destaque

- ü§ñ **6 Agentes Especializados** - Cada um com prop√≥sito espec√≠fico
- üñºÔ∏è **An√°lise Visual Avan√ßada** - GPT-4 Vision + LlamaIndex ‚≠ê
- üé® **Interface Moderna** - Design responsivo e intuitivo
- üîß **APIs RESTful** - Integra√ß√£o f√°cil com outros sistemas
- üìä **Monitoramento** - Health checks e m√©tricas detalhadas
- üöÄ **Deploy Autom√°tico** - Configura√ß√£o zero no Render
- üìö **Documenta√ß√£o Completa** - Exemplos e tutoriais detalhados
- üîí **Configura√ß√£o Segura** - Chaves API isoladas por ambiente
- üåê **Multi-plataforma** - Funciona em Windows, Mac e Linux

**üí° Perfeito para aprender, experimentar e aplicar diferentes t√©cnicas de IA visual e textual!**
